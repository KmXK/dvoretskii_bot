логика работы команды /bill:

/bill add добавление нового счета
пользователь вводит название счета, которое по совместительству является именем файла в Google Drive в папке финансы
после этого бот ищет этот файл в гугл драйв и выдает "начальный отчет" по счету

/bill all посмотреть все счета  - бот выдает список всех счетов с описанием

/bill {id} - посмотреть счет по id, бот выдает "отчет" по счету

/bill pay {кто} {кому} {сумма} - бот добавляет перевод в базу данных с id без времени

/bill close {id1} {id2} ... - закрыть счета

/bill - бот выдает "общий отчет" по всем счетам

/bill help - бот выдает "помощь" по команде

/bill details add {пользователь} - добавление платежных данных для пользователя
бот спрашивает описание платежных данных для пользователя

/bill details edit {пользователь} - редактирование платежных данных для пользователя

"начальный отчет":
- блок кто кому сколько должен, или инструкция как закрыть счет если платежи закрывают все долги
- блок с платежными данными для пользователей которым должны(лишних не надо)
- ссылка на файл в гугл драйве

"отчет":
- блок кто кому сколько должен, или инструкция как закрыть счет если платежи закрывают все долги
- блок кто кому сколько должен из всех счетов, или инструкция как закрыть счет если платежи закрывают все долги
- блок с совершенными платежами, которые могут относиться к этому счету
- блок с платежными данными для пользователей которым должны(лишних не надо)
- ссылка на файл в гугл драйве

"общий отчет":
- блок кто кому сколько должен из всех счетов, или инструкция как закрыть счет если платежи закрывают все долги
- блок с совершенными платежами, которые могут относиться к этим счетам
- блок с платежными данными для пользователей которым должны(лишних не надо)


для блока кто кому сколько должен используется алгоритм
попарная свертка только между прямыми парами (должник ↔ кредитор):
для каждой пары (A, B) считается разница: долг A→B минус долг B→A;
в отчёте остаётся один остаток в одну сторону (или ноль, если долги взаимно погасились);
перебрасывание долгов через третьих лиц не используется — учитываются только прямые пары.

инструкция должна включать прямую команду /bill close {id1} {id2} ... для закрытия счетов
при закрытии удаляются счета из базы данных и платежи их закрывающие, но если платеж на сумму больше чем долг, то остаток остается в базе данных и может быть использован для закрытия других счетов, надо не удалить платеж а уменьшить его

возможные ситуации:
по счету 1 А должен Б 10
по счету 2 Б должен А 5
платеж от А к Б на 5
и для счета 1, и для счета 2 должно быть помечено что А не должен Б 

формат данных в файле на гугл диске:
Наименование|Достоинство|Плательщик|Плательщик (фактический)
трактуется как:
_|сумма которую должны|кто должен|кому должен
кто должен может быть несколько через запятую